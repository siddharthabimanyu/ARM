#include<lpc21xx.h>
#include "delay.h"
#define LCD_D 0xFF
#define RS 1<<8
#define E 1<<9
void LCD_INIT(void);
void LCD_CMD(unsigned char);
void LCD_DATA(unsigned char );
void LCD_INTEGER(unsigned int);
int main()
{
LCD_INIT();
LCD_CMD(0x80);
LCD_INTEGER(7);
}
void LCD_INIT(void)
{
IODIR0=LCD_D | RS | E ;
LCD_CMD(0x01);
LCD_CMD(0x02);
LCD_CMD(0x0C);
LCD_CMD(0x38);
}
void LCD_CMD(unsigned char CMD)
{
IOPIN0=CMD;
//IOCLR0=LCD_D;
//IOSET0=CMD;
IOCLR0=RS;
IOSET0=E;
delay_ms(2);
IOCLR0=E;
}
void LCD_DATA(unsigned char D)
{
IOPIN0=D;
//IOCLR0=LCD_D;
//IOSET0=CMD;
IOSET0=RS;
IOSET0=E;
delay_ms(2);
IOCLR0=E;
}
void LCD_INTEGER(unsigned int n)
{
unsigned char a[5] ;
signed char i=0;
if(n==0)
{
LCD_DATA('0');
}
else if(n<0)
{
LCD_DATA('-');
n=-n;
}
while(n>0)
{
a[i++]=n%10;
n=n/10;
}
for(--i;i>=0;i--)
LCD_DATA(a[i]+48);
}
